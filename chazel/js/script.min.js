for(var articleNum={novel:[21,11],shortStory:4,flashFiction:5},pageNum={novel:[],shortStory:Math.ceil(articleNum.shortStory/3),flashFiction:Math.ceil(articleNum.flashFiction/3)},novelChapterNum=articleNum.novel.length,i=0;i<novelChapterNum;i++)pageNum.novel[i]=Math.ceil(articleNum.novel[i]/3);$.ajaxSetup({cache:!1});function goBack(){$("#go-back").hide();$("#reading-area").hide();$("html,body").scrollTop();$("#summary-wrapper").show()}var nav=document.getElementById("nav"),navFixed=document.getElementById("nav-fixed");
function handleNav(){-50>nav.getBoundingClientRect().top?(navFixed.style.transition="top 0s, opacity 0.5s",navFixed.style.top="0",navFixed.style.opacity=1):(navFixed.style.transition="top 0s 0.5s, opacity 0.5s",navFixed.style.top="-9999px",navFixed.style.opacity=0)}window.addEventListener("scroll",function(){handleNav()},!1);
$(document).ready(function(){$('a[href*="#"]:not([href="#"])').click(function(){$("#reading-area").hide();$("#summary-wrapper").show();if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash),a=a.length?a:$("[name="+this.hash.slice(1)+"]");if(a.length)return $("html,body").animate({scrollTop:a.offset().top-80},800),$("#go-back").hide(),!1}})});var activeChapter=novelChapterNum;
function activeTab(a){for(var c=1;c<=novelChapterNum;c++){var b=document.getElementById("tab-chapter-"+c);b.className=b.className.replace(/ btn-active/g,"")}document.getElementById("tab-chapter-"+a).className+=" btn-active";loadLatestChapterArticle(a);deployPagingBtn("novel",a);loadSummary("novel",a,1);activeChapter=a;window.DISQUSWIDGETS=void 0;$.getScript("http://chazeldisqus.disqus.com/count.js")}
function loadLatestChapterArticle(a){$("#latest-novel-title").html("\u8b80\u53d6\u4e2d...");$("#latest-novel-comment-count").html("\u8b80\u53d6\u4e2d...");$("#latest-novel-comment-count").attr("data-disqus-identifier","novel__"+a+"__"+articleNum.novel[a-1]);$("#latest-novel-content").html("\u8b80\u53d6\u4e2d...");$.get("http://eightdonuts.github.io/chazel/text/novel/chapter-"+a+"/"+articleNum.novel[a-1],function(c){c=c.split("\n");$("#latest-novel-cover").css({background:"url('./img/cover/novel/"+
c[0]+"') center center",backgroundSize:"cover"}).unbind().click(function(){readArticle("novel",a,articleNum.novel[a-1])});$("#latest-novel-title").html(c[1]).unbind().click(function(){readArticle("novel",a,articleNum.novel[a-1])});$("#latest-novel-content").html(c[2].replace(/<br>/g,"").replace(/\u3000/g,"").substring(0,120)+"...")})}var novelSection={show:function(){$("#latest-novel-wrapper").hide();$("#novel-wrapper").show()},hide:function(){$("#novel-wrapper").hide();$("#latest-novel-wrapper").show()}};
function loadSummary(a,c,b){var e,d;switch(a){case "novel":e=articleNum.novel[c-1];break;case "short-story":e=articleNum.shortStory;break;case "flash-fiction":e=articleNum.flashFiction}d=Math.ceil(e/3);for(var f=1;f<=d;f++)$("#"+a+"-paging-btn-"+f).removeClass("btn-active");$("#"+a+"-paging-btn-"+b).addClass("btn-active");for(d=1;3>=d;d++){f=e-3*(b-1)-d+1;if(0>=f){for(b=d;3>=b;b++)deployArticleSummary(a,c,b,0);break}deployArticleSummary(a,c,d,f)}}
function deployArticleSummary(a,c,b,e){if(0==e)$("#"+a+"-"+b+"-cover").css("background-image","none"),$("#"+a+"-"+b+"-category").html(""),$("#"+a+"-"+b+"-title").html(""),$("#"+a+"-"+b+"-comment-count").html("").removeAttr("data-disqus-identifier"),$("#"+a+"-"+b+"-content").html("");else{$("#"+a+"-"+b+"-title").html("\u8b80\u53d6\u4e2d...");$("#"+a+"-"+b+"-content").html("\u8b80\u53d6\u4e2d...");$("#"+a+"-"+b+"-comment-count").html("0 \u5247\u8a55\u8ad6");$.get(("novel"==a?"http://eightdonuts.github.io/chazel/text/novel/chapter-"+
c+"/":"http://eightdonuts.github.io/chazel/text/"+a+"/")+e,function(d){d=d.split("\n");$("#"+a+"-"+b+"-cover").css({background:"url('./img/cover/"+a+"/"+d[0]+"') center center",backgroundSize:"cover"}).unbind().click(function(){readArticle(a,c,e)});switch(a){case "novel":$("#"+a+"-"+b+"-category").html("\u9577\u7bc7\u5c0f\u8aaa");break;case "short-story":$("#"+a+"-"+b+"-category").html("\u77ed\u7bc7\u5c0f\u8aaa");break;case "flash-fiction":$("#"+a+"-"+b+"-category").html("\u6975\u77ed\u7bc7\u5c0f\u8aaa")}$("#"+
a+"-"+b+"-title").html(d[1]).unbind().click(function(){readArticle(a,null,e)});$("#"+a+"-"+b+"-content").html(d[2].replace(/<br>/g,"").replace(/\u3000/g,"").substring(0,120)+"...")});var d;d=null==c?a+"__"+e:a+"__"+c+"__"+e;$("#"+a+"-"+b+"-comment-count").attr("data-disqus-identifier",d);window.DISQUSWIDGETS=void 0;$.getScript("http://chazeldisqus.disqus.com/count.js")}}
function deployPagingBtn(a,c){var b,e=[];switch(a){case "novel":b=pageNum.novel[c-1];break;case "short-story":b=pageNum.shortStory;break;case "flash-fiction":b=pageNum.flashFiction}for(var d=1;d<=b;d++)e.push('<button id="'+a+"-paging-btn-"+d+'" class="btn" onclick="loadSummary(\''+a+"', "+c+", "+d+')">'+d+"</button>");"novel"==a&&e.push('<button class="btn" onclick="novelSection.hide()">\u986f\u793a\u6700\u65b0\u4e00\u56de</button>');$("#"+a+"-paging").html(e.join(""))}var prevFunc,nextFunc;
function readArticle(a,c,b){$("#summary-wrapper").hide();$("html,body").scrollTop();$("#go-back").show();$("#reading-area").show();var e;switch(a){case "novel":e=articleNum.novel[c-1];break;case "short-story":e=articleNum.shortStory;break;case "flash-fiction":e=articleNum.flashFiction}$("#reading-area-title").html("\u8b80\u53d6\u4e2d...");$("#reading-area-content").html('<div id="disqus_thread"></div>');resetDisqus(a,c,b);var d;d="novel"==a?"http://eightdonuts.github.io/chazel/text/novel/chapter-"+
c+"/":"http://eightdonuts.github.io/chazel/text/"+a+"/";$.get(d+b,function(a){a=a.split("\n");$("#reading-area-title").html(a[1]);$("<div>"+a[2]+"</div>").insertBefore("#disqus_thread")});$("#prev-article-title").html("\u8b80\u53d6\u4e2d...");$("#next-article-title").html("\u8b80\u53d6\u4e2d...");1<b?($.get(d+(b-1),function(d){$("#prev-article-title").html(d.split("\n")[1]);prevFunc=function(){readArticle(a,c,b-1)}}),$("#prev").show()):$("#prev").hide();b<e?($.get(d+(b+1),function(d){$("#next-article-title").html(d.split("\n")[1]);
nextFunc=function(){readArticle(a,c,b+1)}}),$("#next").show()):$("#next").hide()}var readingSetting={fontSize:[14,16,20],lineHeight:[1.6,2,2.4]};function setFontSize(a){for(var c=1;3>=c;c++){var b=document.getElementById("font-size-btn-"+c);b.className=b.className.replace(/ btn-active/g,"")}document.getElementById("font-size-btn-"+a).className+=" btn-active";$("#reading-area-content").css("font-size",readingSetting.fontSize[a-1]+"px")}
function setLineHeight(a){for(var c=1;3>=c;c++){var b=document.getElementById("line-height-btn-"+c);b.className=b.className.replace(/ btn-active/g,"")}document.getElementById("line-height-btn-"+a).className+=" btn-active";$("#reading-area-content").css("line-height",readingSetting.lineHeight[a-1])}var disqus_config=function(){this.page.url="http://eightdonuts.github.io/chazel/";this.page.identifier="home"};
(function(){var a=document,c=a.createElement("script");c.src="http://chazeldisqus.disqus.com/embed.js";c.setAttribute("data-timestamp",+new Date);(a.head||a.body).appendChild(c)})();function resetDisqus(a,c,b){var e;e=null==c?a+"__"+b:a+"__"+c+"__"+b;DISQUS.reset({reload:!0,config:function(){this.page.url="http://eightdonuts.github.io/chazel/#!"+e;this.page.identifier=e}})}loadLatestChapterArticle(novelChapterNum);deployPagingBtn("novel",novelChapterNum);loadSummary("novel",novelChapterNum,1);
deployPagingBtn("short-story",null);loadSummary("short-story",null,1);deployPagingBtn("flash-fiction",null);loadSummary("flash-fiction",null,1);